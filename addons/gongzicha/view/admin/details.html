<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    {js href='__STATIC__/jquery/jquery-1.11.0.min.js' /}
    {js href='__STATIC__/layui/layui.js' /}
    {CSS href="__STATIC__/layui/css/layui.css" /}
    {CSS href="__ADDONSTATIC__/css/style.css" /}
</head>
<body>
	<style>
		.margin_bottom{
			margin-bottom: 30px;
		}

		.margin_left20{
			margin-left: 20px;
		}
	</style>
<!-- 	<form class="layui-form" action=""  enctype="multipart/form-data">
	  
		<div class="margin_bottom">
			<div class="margin_left20">
			  <input type="text" name="file_name" lay-verify="title" autocomplete="off" placeholder="请输入文件名称" class="layui-input" style="width: 300px">
			</div>
		</div>
			<input type="file" name="files" class="margin_left20 margin_bottom">
		<div class="layui-upload">
		  <button type="button" class="layui-btn layui-btn-normal" id="test8">选择文件</button>
		  <button type="button" class="layui-btn" id="test9">开始上传</button>
		</div>
		<button type="button" class="layui-btn margin_left20 margin_bottom" id="test3"><i class="layui-icon"></i>上传文件</button>
		<div class="layui-form-item margin_left20" >
			<div class="">
			  <button type="submit" class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
			  <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
	</form> -->

<form id="form-avatar" enctype="multipart/form-data">
    <p>请选择要上传的文件：</p>
    <p><input type="file" name="file" /></p>
    <p><input type="text" name="file_name"></p>
    <p><input id="btn-avatar" type="button" value="上传" /></p>
</form>

</body>
</html>

<script>

 function uploadfile(){
  $.ajax({
   url : "{:addonUrl('addExcel')}",
   data: new FormData($("#form-avatar")[0]),
   type : "POST",
   // 告诉jQuery不要去处理发送的数据，用于对data参数进行序列化处理 这里必须false
   processData : false,
   // 告诉jQuery不要去设置Content-Type请求头
   contentType : false,
 
   success : function(json) {
    alert("执行成功");
   },
   error : function(json) {
    alert("执行失败");
 
   }
  });
 }
 $("#btn-avatar").on("click",uploadfile);

// layui.use(['form', 'layedit', 'laydate'], function(){
//   var form = layui.form
//   ,layer = layui.layer
//   ,layedit = layui.layedit
//   ,laydate = layui.laydate;
  

//   //监听提交
//   form.on('submit(demo1)', function(data){
//     // layer.alert(JSON.stringify(data.field), {
//     //   title: '最终的提交信息'
//     // })
//     console.log(data)
//     return;
// 		$.ajax({
// 			type: "POST",
// 			url: "{:addonUrl('a')}",
// 			data: data.field,
// 			processData : false,
// 			// 告诉jQuery不要去设置Content-Type请求头
// 			ScontentType : false,

// 			success: function(msg){
// 				console.log(msg)
// 			}
// 		});
// 	    // console.log(data.field)
// 	    return false;
//   });
 
  
//   //表单取值
//   layui.$('#LAY-component-form-getval').on('click', function(){
//     var data = form.val('example');
//     alert(JSON.stringify(data));
//   });
  
// });


// layui.use('upload', function(){
//   var $ = layui.jquery
//   ,upload = layui.upload;
//   //选完文件后不自动上传
//   upload.render({
//     elem: '#test8'
//     ,url: 'https://httpbin.org/post' //改成您自己的上传接口
//     ,auto: false
//     //,multiple: true
// 	,accept: 'file' //普通文件
//     ,bindAction: '#test9'
//     ,done: function(res){
//       layer.msg('上传成功');
//       console.log(res)
//     }
//   });
// });
</script>